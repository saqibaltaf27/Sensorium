# Start from a Windows base image that already has Python installed
FROM mcr.microsoft.com/windows/servercore:ltsc2019

# Install SQL Server Native Client 11.0
ADD https://download.microsoft.com/download/0/7/D/07D0D8D6-F2A7-4C27-8D93-2E684B1E2AF1/sqlncli.msi C:\\sqlncli.msi
RUN powershell Start-Process msiexec.exe -ArgumentList '/i C:\\sqlncli.msi /quiet /qn /norestart IACCEPTSQLNCLILICENSETERMS=YES' -Wait

# Create app directory and copy your code
WORKDIR /app
COPY . /app

# Install Python dependencies (Flask, pyodbc, etc.)
RUN pip install --no-cache-dir -r requirements.txt

# Expose Flask port
EXPOSE 5000

# Start Flask app
CMD ["python", "temp_api.py"]
